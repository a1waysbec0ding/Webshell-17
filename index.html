<html>
<head>
    <script src='jslib/jquery-1.10.2.js'         type='text/javascript'> </script>
    <script src='jslib/jquery.terminal-0.7.6.js' type='text/javascript'> </script>
    <script src='jslib/jquery.jsonrpcclient.js'  type='text/javascript'> </script>
    <script src='command_parser.js'              type='text/javascript'> </script>
    <link href="css/jquery.terminal.css" rel="stylesheet"/>
    <script  type='text/javascript'>
    $(document).ready(
        function(){
            var prompts = ['hamsta'];
            $('#term_demo').terminal(
                  function(command, term) {
        	        term.echo('DEBUG -- Command is:  ' + command + "</br>");
                        
                        var cmdline = command.split(' ');
                        var cmd  = $.trim(cmdline[0]);
                        p = new command_parser();
                        p.parse(cmdline, term);
                        
                  },
                  {
                      greetings: 'Hamsta web shell, enjoy it!',
                      name: 'hamsta_shell',
                      height: 500,
                      prompt: window.location.hostname+':' + get_prompt_string(prompts)
                  }
             );
        }
    );
    


    function get_prompt_string( prompts )
    {
        var prompt_str = "/";
        if (prompts && prompts.length>0)
        {
            $.each( prompts, function(index, value){
                prompt_str += value + "/";
            });
        }
        prompt_str += ">"
        return prompt_str;
    }

    </script>
</head>
    <body>
        <div id='term_demo'></div>
    </body>
</html>
